# Language-specific development tools.
language: clojure
jdk: oraclejdk8

# Environment variables (e.g. encrypted credentials).
env:
  global:
  - secure: Zv8mNYuHTlR/y0yP5gJkgHHPX0ZZEt0IWDH2VR+mlpkcDi8qDBQ07c4ywRUUvjSgtyWJVtoXs5K9/g6dkV4T0pNJefsm6+DGGmYW41mB9cDyUszu8oX6xcmmZH9lv2x8911o+XVAbX7VhLHVHZztuLWYOkYoP22uOal2id+lSKP4pOWqzlTt8lfwnryLQhAVSRtIz5zbD73zE7qq4ajnnckp9uhAE5sj2xMomTSS1nfHMx8ygSlBi8YIFN6eYlY1m5Yk53NZAGObgLYhOolESVe4IUg6wy/jaXhMOtm6zaAdQtKB3jY2czxpfZF63cazRf9U1ieVWx6ss1HxvtNMSyR5oAynLsNUlJeJFdTcNyFl4q3QPDt4/SqLLrU2iM24jsw7xHPt0LDfuvN9eI+gVFjskGD6PWtw+raaZ1ZqbeXTpEnRYfTs6gYeXAnNe+jofRI3cfpGNAHOCeMWVcTuVhT6XjzVv0CsHPsaEcmwLvl/fRH16b38+OsJBVzw4grw8FasrIsZVAoQbW9067aR4Hpf1byd1jCEPA4xAsPCa4vvhQusTX6fT5zoP4FuYae+P8hL15h3P0GsOSVw1wezHjVxPSdtVARkjqg1CkFLWOtoyZj7aOzzGGvvIU/Yxy/Tcvf7veMkUPDhItn2FOqHDiruJk1rsWTA72G/PtVBysM=
  - secure: jBly9iDZT9dCE43QDWsAk0FCMpdW89gpr2AhZlXDBUSbddM+t6qXUUtnpnrq4V7BjqmymqM8Z8+VdSBdv1i11DpjQCqC2BO5KZncTMPehzF+qbt1nr9IZXu/sMt/pgvOcr2Ie1mLF//KwnkrlxOUyUxEjuO6OVdO47qWsKawU7bci649KBGTDoCqflZ0EE7ZLQuDDZ9rlZ/+hLvqFQLxyEajW0ZJxK0hIaxU+IoQdT8y5e08ru1ULCGqQR1JAQsxovJVtJ8SLttIt6A1OFNn/EUTM8nvizyVgt+chp992sX4eRrlUatHamrUIbPGsTs2m8+FHda2agQz5YJ1wLyY+m3QaJGO4pIP1LqDBVb1M7vCTz/Lr24OV/3x75tys6frWQD4ez77aX+YeBbplrO8+biLv8/V9u2UU1X8fxgjCXVylBnkwco/ZgMDL4NLUUDGYpt6qZly98dSO8Q7Mu90mptUxKZRL0XBX1taAk3rAr8wjuHlLGvzpXE5w8fadVbENxhLW4Gq4OxrVmdb8uME25FQR1VPVFHcksmoWcayy8bQF/AbqTh5j9at8fpBcGBZ51cBzX7luijGJi7gc2h0yiR9FSQeCW17gPuueV7bHMWKsA/Ahye68qVFGpQh3nJya0tThknpb4KFaJVF6dLHHZObcDUKb/lIYSZOToY3nMQ=

# Pipeline stages.
jobs:
  include:
  - stage: test
    if: branch IN (master, devel) OR branch =~ ^version-
    script: lein test
  - stage: publish
    if: branch IN (master, devel) OR branch =~ ^version-
    script:
    - lein deploy
    - lein deploy-uberjar

